<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">
  <changeSet author="sam" id="8">
	<createTable tableName="singularity_deployment_bindings">
	  <column name="component_id" type="INT">
	    <constraints foreignKeyName="component_id" />
	  </column>
	  <column name="cluster_id" type="INT">
		  <constraints foreignKeyName="cluster_id" />
	  </column>
	  <column name="singularity_request_id" type="TEXT">
	    <constraints nullable="false" unique="false" />
	  </column>
	</createTable>
	<addForeignKeyConstraint baseColumnNames="component_id"
		baseTableName="singularity_deployment_bindings"
		constraintName="singularity_deployment_bindings_component_id_fkey"
	    referencedColumnNames="component_id" referencedTableName="components" />
	<addForeignKeyConstraint baseColumnNames="cluster_id"
		baseTableName="singularity_deployment_bindings"
		constraintName="singularity_deployment_bindings_cluster_id_fkey"
	    referencedColumnNames="cluster_id" referencedTableName="clusters" />
	<addPrimaryKey columnNames="component_id, cluster_id"
		constraintName="pk_singularity_deployment_bindings" tableName="singularity_deployment_bindings" />
  </changeSet>
</databaseChangeLog>
